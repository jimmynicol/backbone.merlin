/*
-------------------
Backbone.Merlin
-------------------

v0.0.1

Copyright (c) 2013: James Nicol <james.andrew.nicol@gmail.com>
Distributed under MIT license

http://github.com/jimmynicol/backbone.merlin
*/

var Backbone=this.Backbone;Backbone||"undefined"!=typeof exports&&(Backbone=require("backbone"));var _=this._;_||"undefined"!=typeof exports&&(_=require("underscore")),Backbone.Merlin={},Backbone.Merlin.Slide=function(a,b){"use strict";function c(){}return b.extend(c.prototype,{cssProperties:{transform:["webkitTransform","MozTransform","msTransform","OTransform"],transitionDuration:["webkitTransitionDuration","MozTransitionDuration","msTransitionDuration","OTransitionDuration","transitionDuration"],transitionEnd:["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"]},canCssTransform:function(){var a,c,d;return a=document.body||document.documentElement,c=a.style,"undefined"==typeof c?!1:(d=!1,b.forEach(this.cssProperties.transform,function(a){"string"==typeof c[a]&&(d=!0)}),d)},smoothSlide:function(c){var d,e,f,g,h;if("undefined"==typeof c&&(c={}),!c.slider||!c.distance)throw"To slide the component needs a slider and distance property";return d=a(c.slider),e=c.distance,f=c.direction||"x",g=c.direction||"300",h=this.setTranslations(f,e),this.canCssTransform()?(b.forEach(this.cssProperties.transitionDuration,function(a){d.css(a,""+g+"ms")}),c.callback&&d.one(this.cssProperties.transitionEnd.join(" "),c.callback),b.forEach(this.cssProperties.transform.slice(0,2),function(a){d.css(a,h.translate3d)}),b.forEach(this.cssProperties.transform.slice(2,4),function(a){d.css(a,h.translate)}),void 0):(d.animate(h.moveMargin,g,c.callback),void 0)},setTranslations:function(a,b){var c={moveMargin:"",translate3d:"",translate:""};switch(a){case"x":c.moveMargin={marginLeft:""+-b+"px"},c.translate3d="translate3d("+-b+"px,0,0)",c.translate="translateX("+-b+"px)";break;case"y":c.moveMargin={marginTop:""+-b+"px"},c.translate3d="translate3d(0,"+-b+"px,0)",c.translate="translateY("+-b+"px)"}return c}}),c}(Backbone.$,_),Backbone.Merlin.Base=function(a,b,c){"use strict";function d(a){this.options=a||{},this.$el=b(this.options.el)}return c.extend(d.prototype,a.Merlin.Slide.prototype,{}),d}(Backbone,Backbone.$,_),Backbone.Merlin.State=function(){"use strict";function a(){}return a}(Backbone.$,_),"undefined"!=typeof exports&&(module.exports=Backbone.Merlin);